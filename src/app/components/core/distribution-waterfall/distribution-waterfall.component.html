<div class="mx-auto max-w-5xl p-4 sm:p-6 bg-gray-900 min-h-screen">
  <!-- Header -->
  <div class="mb-8 text-center">
    <h1 class="text-2xl sm:text-3xl font-semibold text-white mb-2">
      Distribution Waterfall
    </h1>
    <p class="text-gray-400 italic">{{ projectData.project_name }}</p>
  </div>

  <!-- Pie Chart Section -->
  <div class="mb-10">
    <div class="bg-gray-800 rounded-2xl border border-gray-700 shadow-2xl p-6 backdrop-blur-sm bg-opacity-90">
      <h2 class="text-xl font-semibold text-white mb-6 text-center">
        Stakeholder Distribution
      </h2>

      <div class="flex flex-col lg:flex-row items-center justify-between gap-8">
        
        <!-- Pie Chart -->
        <div class="relative w-64 h-64 mx-auto lg:mx-0">
          <svg viewBox="0 0 42 42" class="w-full h-full">
            <g *ngFor="let slice of pieSlices; let i = index">
              <path
                [attr.d]="slice.path"
                [attr.fill]="slice.color"
                stroke="#1f2937"
                stroke-width="1"
                class="transition-all duration-300 ease-in-out hover:opacity-90 cursor-pointer hover:drop-shadow-lg"
                (mouseenter)="highlightSlice(i)"
                (mouseleave)="resetHighlight()"
              />
            </g>
          </svg>

          <!-- Center Text -->
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="text-center">
              <div class="text-2xl text-white font-bold">
                {{ getTotalPercentage() }}%
              </div>
              <div class="text-xs text-gray-300 mt-1 font-medium">
                Total Stake
              </div>
            </div>
          </div>
        </div>

        <!-- Legend -->
        <div class="flex-1 max-w-md">
          <div class="space-y-3">
            <div 
              *ngFor="let stakeholder of projectData.stakeholders; let i = index"
              class="flex items-center gap-3 p-3 rounded-lg bg-gray-700 bg-opacity-50 border border-gray-600 hover:bg-gray-600 hover:border-gray-500 transition-all duration-200 cursor-pointer backdrop-blur-sm"
              (mouseenter)="highlightSlice(i)"
              (mouseleave)="resetHighlight()"
            >
              <span class="h-4 w-4 rounded-full flex-shrink-0 border border-gray-400"
                    [style.background-color]="getStakeholderColor(i)"></span>

              <div class="flex-1 min-w-0">
                <div class="font-medium text-white text-sm">{{ stakeholder.name }}</div>
                <div class="text-xs text-gray-400 italic">{{ stakeholder.type }}</div>
              </div>

              <div class="text-right">
                <div class="font-semibold text-white">{{ stakeholder.percentage }}%</div>
                <div class="text-xs text-gray-400">Stake</div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Stakeholders Table -->
  <div class="mt-8">
    <h2 class="mb-4 text-xl font-semibold text-white">Stakeholder Details</h2>

    <div class="overflow-x-auto rounded-2xl border border-gray-700 bg-gray-800 bg-opacity-90 shadow-2xl backdrop-blur-sm">
      <table class="min-w-full text-left text-sm">
        <thead class="bg-gray-700 text-gray-300">
          <tr>
            <th class="px-6 py-4 font-medium">Name</th>
            <th class="px-6 py-4 font-medium">Type</th>
            <th class="px-6 py-4 font-medium text-right">Stake Percentage</th>
            <th class="px-6 py-4 font-medium text-right">Color</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let stakeholder of projectData.stakeholders; let i = index"
              class="border-t border-gray-600 hover:bg-gray-700 transition-colors duration-200">
            <td class="px-6 py-4 font-medium text-white">{{ stakeholder.name }}</td>
            <td class="px-6 py-4 text-gray-400 italic">{{ stakeholder.type }}</td>
            <td class="px-6 py-4 text-white text-right font-semibold">{{ stakeholder.percentage }}%</td>
            <td class="px-6 py-4 text-right">
              <span class="inline-flex items-center gap-2">
                <span class="h-4 w-4 rounded-full inline-block border border-gray-400"
                      [style.background-color]="getStakeholderColor(i)"></span>
                <span class="text-xs text-gray-400">{{ getStakeholderColor(i) }}</span>
              </span>
            </td>
          </tr>

          <tr class="border-t border-gray-500 bg-gray-600 bg-opacity-50">
            <td class="px-6 py-4 font-bold text-white">Total</td>
            <td class="px-6 py-4"></td>
            <td class="px-6 py-4 text-right font-bold text-white">
              {{ getTotalPercentage() }}%
            </td>
            <td class="px-6 py-4"></td>
          </tr>

        </tbody>
      </table>
    </div>
  </div>

</div>